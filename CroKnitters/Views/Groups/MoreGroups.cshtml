@using CroKnitters.Entities;
@model List<Group>
@{
    ViewData["Title"] = "More Groups";
}


<a asp-controller="Groups" asp-action="Index" class="w-auto justify-center rounded-md bg-indigo-600 m-3 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 mt-2">Back to Groups</a>

<div class="container mx-auto">

    <div class="p-3">
        <div style="width: 500px; margin-left: 100px;" class="rounded-lg border shadow-xl h-auto m-5 p-2 bg-white">
            <ul role="list" class="divide-y divide-grey-900">

                @foreach (var group in Model)
                {
                    <li class="flex justify-between w-auto gap-x-6 py-5">

                        <div class="min-w-0 flex-auto">
                            <h4 class="text-xl font-semibold leading-6 text-gray-900">@group.GroupName</h4>
                            <h3 class="mt-1 text-xs leading-5 text-gray-500">@group.Description</h3>
                            <p class="mt-1 text-xs leading-5 text-gray-500">created @group.CreationDate</p>
                            <p class="mt-1 text-xs leading-5 text-gray-500">@group.GroupUsers.Count members</p>

                            <a class="btn btn-primary bg-primary m-1" type="button" asp-controller="Groups" asp-action="JoinGroup" asp-route-id="@group.GroupId">Join Group</a>
                        </div>

                    </li>
                    <hr />
                }

            </ul>
        </div>

    </div>
</div>


@section scripts{
    <script src="~/js/signalr.min.js"></script>
    <script src="https://www.unpkg.com/axios@1.6.8/dist/axios.min.js"></script>

    <script>

        var connection = new signalR.HubConnectionBuilder().withUrl("/hub/groupChatHub").build();

        //start the connection and get the connection id
        connection.start().then(function () {

            console.log("Connection started");

        }).catch(function (err) {
            return console.log(err.toString())
        })

    </script>
}