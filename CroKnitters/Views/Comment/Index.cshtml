@using CroKnitters.Entities
@model List<Comment>
@{
    ViewData["Title"] = "Comment Section";
}

<div class="flex">
    <div class="flex-1 rounded-lg border shadow-xl m-5 justify-center bg-white">

        <p>
            <a asp-controller="Comment" asp-action="AddComment" class="btn btn-primary m-2"><i class="bi bi-plus-square-fill"></i> Add Comment </a>

        </p>

        <table class="table table-striped" ">
            <tr>
                <th class="table-dark">
                    COMMENTS
                </th>
                <th class="table-dark">
                </th>
                <th class="table-dark">
                </th>
            </tr>

        @if (Model != null)
        {
            @foreach (var item in Model)
            {
                    <tr>
                        <td>
                            <div class="p2">
                            @Html.DisplayFor(modelItem => item.Owner.Username)
                            </div>

                        @Html.DisplayFor(modelItem => item.Content)
                        </td>

                        <td>
                        @Html.DisplayFor(modelItem => item.Likes)
                        </td>


                        <td>

                        @if (Context.Request.Cookies["userId"] != null && item.OwnerId == Int32.Parse(Context.Request.Cookies["userId"]))
                        {
                                <a href="@Url.Action("EditComment", "Comment", new { id = item.CommentId })" class="w-auto justify-center rounded-md bg-indigo-600 m-3 px-3 py-1.5
                            text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500
                            focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2
                            focus-visible:outline-indigo-600 mt-2" role="button">EDIT</a>

                                <a href="@Url.Action("DeleteComment", "Comment", new { id = item.CommentId })" class="w-auto justify-center rounded-md bg-indigo-600 m-3 px-3 py-1.5
                            text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500
                            focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2
                            focus-visible:outline-indigo-600 mt-2" role="button">DELETE</a>

                        }
                        else
                        {
                                <a href="@Url.Action("LikeComment", "Comment", new { id = item.CommentId })" class="w-auto justify-center rounded-md bg-indigo-600 m-3 px-3 py-1.5
                            text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500
                            focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2
                            focus-visible:outline-indigo-600 mt-2" role="button">Like</a>
                        }

                        </td>

                    </tr>

            }
        }
        else
        {
                <tr>
                    <p>No Comments.</p>
                </tr>
        }
        </table>
    </div>
</div>
